
- 플랫폼 상관없는 개인 개발 환경, 규칙에 대한 공통 프롬프트를 제공합니다.

# 작업 사이클

1. 요구 사항 분석
2. 테스트 케이스 작성
3. 커밋
4. 코드 작성
5. 테스트 실행
6. 커밋
7. 코드 리뷰
8. 리팩토링
9. 커밋
10. 불필요한 코드 제거 및 개선 사항 적용
11. 커밋
12. 개선을 위한 프롬프트 갱신
13. 2로 돌아가서 반복

# 기본 개발 원칙

- 코드를 작성할 때는 항상 요구 사항을 먼저 이해하고, TDD 원칙을 따라 개발합니다.
  - RED: 실패하는 테스트를 작성합니다.
  - GREEN: 테스트를 통과하는 최소한의 코드를 작성합니다.
  - REFACTOR: 코드를 리팩토링하여 가독성과 유지보수성을 향상시킵니다.
  - 테스트 작성 전에 기존 테스트 목록을 확인해야 합니다.
    - 테스트 코드 또한 코드로 취급하며 도메인, 모델, 동작에 따른 디렉토리 구조를 구성합니다.
  - 동시에 여러 테스트를 작성하지 않습니다. 하나의 테스트를 작성하고, 이를 통과시킨 후 다음 테스트를 작성합니다.
  - 외부 API를 사용하는 것이 아니라면 절대로 모킹(mocking)이나 스텁(stubbing)을 사용하지 않습니다.
    - 데이터베이스를 사용할 경우, testcontainers를 사용하여 테스트 환경을 구성합니다.
  - 기능 테스트와 유닛 테스트가 동일한 로직을 검증하는 경우, 가능하면 유닛 테스트를 생략하는 방향이 좋습니다.
  - 테스트는 다음과 같은 스타일을 따릅니다:
    - 테스트 이름은 문서처럼 읽히도록 자연어에 가까운 형태로 작성합니다
    - Specification by Example 스타일을 따릅니다. issue 단위로 테스트를 만들어서는 안 됩니다.
    - Arrange-Act-Assert 패턴을 따릅니다.
    - describe, context, it 블록을 사용한 BDD 스타일을 따릅니다.
    - 테스트는 가독성과 명확성을 위해 중복을 허용합니다
    - 테스트가 실패할 경우 어떤 조건이 실패했는지 메시지를 통해 명확하게 전달합니다.
    - 가령 refactored_model_sepc 같은 이름의 파일을 작성하지 않습니다. 이는 구현에 집중된 테스트이기 때문입니다.

- 어떤 문제를 해결하기 위해 코드를 작성할 때는 항상 다음과 같은 원칙을 따릅니다:
  - 문제를 해결하기 위한 최소한의 코드만 작성합니다.
  - 문제의 핵심을 파악하고, 이를 해결하기 위한 가장 간단한 방법을 찾습니다.
  - 복잡한 문제를 해결하기 위해서는 문제를 작은 단위로 나누어 해결합니다.

- 작업 단위에 따라 작은 단위로 git 커밋을 작성합니다.
  - 커밋 메시지는 다음과 같은 형식을 따릅니다:
    ```
    <작업 단위>: <작업 내용>
    ```
  - 예시: `add: 새로운 기능 추가`, `fix: 버그 수정`, `refactor: 코드 리팩토링`
  - 커밋을 하기 전에 다음 사항을 확인합니다:
    - lint를 통과했는지 확인합니다.
    - test를 통과했는지 확인합니다. 만약 RED 상태일 경우는 실패 상태로 커밋합니다.
    - `git status`를 통해 변경 사항을 확인합니다.
    - `git diff`를 통해 변경된 내용을 확인합니다.
  - 바이너리 파일이나 임시 파일은 커밋하지 않습니다. .gitignore 파일을 사용하여 제외합니다.

- 코드를 작성할 때는 항상 다음과 같은 스타일을 따릅니다:
  - Robert C. Martin의 Clean Code 원칙을 따릅니다.
  - Ruby 코드를 작성할 때는 DHH(David Heinemeier Hansson)의 스타일을 따릅니다.

# agents-team 모드

- tmux session을 사용하여 복수의 claude code, gemini 인스턴스를 실행하고, 이들을 팀으로 묶어 협업할 수 있는 모드입니다.
- 세션이 시작될 때 '당신은 president 입니다. 지시사항에 따르십시오' 형태의 메시지를 받았을 때, 각 역할에 맞는 지시 사항을 따릅니다.
- 일반적인 경우는 이 단락을 읽을 필요가 없습니다. 이 문서는 agents-team 모드의 역할 지시서입니다.

## 역할 지시서

- 각 agent는 지시 사항에 따라 다른 역할과 책임을 가지며 서로 커뮤니케이션을 통해 협력합니다.

- 역할 목록
  - president : 총괄 책임자
  - boss1 : 팀 리더
  - worker1,2,3, : 실행담당자

- 메시지 송신
  ```
  agents send <role> "<message>"
  ```

- 작업자 목록 취득 방법
  ```
  agents list
  ```

- 기본 플로우
  president -> boss1 -> workers -> boos1 -> president

- 역할에 따라 다음 지시서를 읽고 따릅니다.
  - @~/prompts/roles/president.md
  - @~/prompts/roles/boss.md
  - @~/prompts/roles/worker.md
