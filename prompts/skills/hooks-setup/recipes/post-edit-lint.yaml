name: post-edit-lint
description: 파일 수정 후 lint 자동 실행
event: PostToolUse
matcher: "Write|Edit"
hooks:
  - type: command
    command: "${SKILL_DIR}/scripts/lint-file.sh"

script_template: |
  #!/bin/bash
  # Lint file after edit
  INPUT=$(cat)
  FILE_PATH=$(echo "$INPUT" | jq -r '.tool_input.file_path // empty')

  [[ -z "$FILE_PATH" ]] && exit 0
  [[ ! -f "$FILE_PATH" ]] && exit 0

  case "$FILE_PATH" in
    *.ts|*.tsx|*.js|*.jsx)
      npx biome check --write "$FILE_PATH" 2>&1 | head -3 >&2 || true
      ;;
    *.py)
      ruff check --fix "$FILE_PATH" 2>&1 | head -3 >&2 || true
      ;;
  esac
  exit 0
